google.load("visualization","1",{packages:["corechart"]});(function(){var a=jQuery;var b=false;var c=function(g,j,k,e){var g=g,j=j,d=k,m=0,h=0,l=Date.parse(e)-Date.parse(new Date());function f(n){if(b){return true}if(typeof(n.error)!="undefined"&&n.error!=""){b=true;a("#content4stats").html('<br><h3 style="color: red;">'+(n.error)+"</h3><p>Please check your project settings.</p>");return true}return false}addCommas=function(o){o+="";x=o.split(".");x1=x[0];x2=x.length>1?"."+x[1]:"";var n=/(\d+)(\d{3})/;while(n.test(x1)){x1=x1.replace(n,"$1,$2")}return x1+x2};getBrowserIconClass=function(n){if(typeof(n)=="undefined"||(typeof(n)!="object"&&typeof(n)!="string")){return""}return"browser-logo browser-"+n.toLowerCase().replace(/\s[0-9\.]+$/,"").replace(/\s/g,"-")};getOsIconClass=function(o){if(typeof(o)=="undefined"||(typeof(o)!="object"&&typeof(o)!="string")){return""}if(o.search(/^windows/i)!=-1){var n="windows"}else{if(o.search(/^macintosh/i)!=-1||o.search(/^mac os/i)!=-1){var n="macintosh"
}else{if(o.search(/^ios/i)!=-1){var n="ios"}else{if(o.search(/^linux/i)!=-1){var n="linux"}else{if(o.search(/^android/i)!=-1){var n="android"}else{var n=""}}}}}return"os-logo os-"+n.toLowerCase().replace(/\s[0-9\.]+$/,"").replace(/\s/g,"-")};parseUri=function(n){var o=document.createElement("a");o.href="http://"+n;return o};showFSDayPerfGraph=function(){var o=new Date();o.setTime(Date.parse(new Date())+l);var n=o.getDate();var q=o.getMonth()+1;var p=o.getFullYear();a.getJSON("https://www.4stats.de/api/numbers?pid="+g+"&apikey="+j+"&mon="+q+"-"+p+"&day="+n+"&jsoncallback=?",function(t){if(f(t.results)){return}chart_data=new Array(["Hour","Page Impressions","Visits"]);for(i=0;i<t.results.items.length;i++){stat=t.results.items[i];chart_data.push([i,parseInt(stat.h),parseInt(stat.v)])}var u=google.visualization.arrayToDataTable(chart_data);var r={title:"Day Performance",hAxis:{title:"Hour",titleTextStyle:{color:"red"},textStyle:{color:"#3399CC",fontSize:10}},legend:"none",pointSize:4,lineWidth:3,gridlineColor:"#ececec",colors:["#eeeeee","#4caeff"],reverseCategories:true,backgroundColor:"transparent",vAxis:{baselineColor:"transparent",textPosition:"in",textStyle:{color:"#8F8F8F",fontSize:10}},chartArea:{width:"100%",height:"100%"}};
var s=new google.visualization.AreaChart(document.getElementById("chart_visitor_div"));s.draw(u,r)})};showFSWPDashboard=function(){showFSDayPerfGraph();a.getJSON("https://www.4stats.de/api/dashboard?pid="+g+"&apikey="+j+"&jsoncallback=?",function(n){if(f(n.results)){return}items_data={Visitors:n.results.visits_today,"Page Impressions":n.results.hits_today,"Ø Pages/Visit":n.results.hits_per_visit_today,"Ø Time on Site (Min.)":n.results.avg_time_today};a.each(items_data,function(p,q){var o='<div class="fs-number"><span>'+q+"</span>"+p+"</div>";a("#fs_dashboard_stats").append(o)})})};showFSDashboard=function(){a.getJSON("https://www.4stats.de/api/dashboard?pid="+g+"&apikey="+j+"&jsoncallback=?",function(q){if(f(q.results)){return}var r=["Visitors","Returning Visitors","New Visitors","Page Impressions","Ø Pages/Visit","Ø Time on Site (Min.)"];var p={Today:"today",Yesterday:"yesterday","This month":"thismonth","Last month":"lastmonth","This year":"thisyear",Total:"total"};var o={};a.each(p,function(s,t){o[s]=[q.results["visits_"+t],q.results["ret_visits_"+t],q.results["visits_"+t]-q.results["ret_visits_"+t],q.results["hits_"+t],q.results["hits_per_visit_"+t],q.results["avg_time_"+t]]
});a("#fs_overview_stats thead tr").append("<th></th>");a.each(r,function(s,t){a("#fs_overview_stats thead tr").append("<th>"+t+"</th>")});a.each(o,function(u,t){var s='<tr><td class="row-title">'+u+"</td>";a.each(t,function(v,w){if(!isNaN(w)){w=addCommas(w)}s+='<td class="fsnum">'+w+"</td>"});s+="</tr>";a("#fs_overview_stats tbody").append(s)});if(q.results.visits_yth<q.results.visits_today){var n="good"}else{if(q.results.visits_yth>q.results.visits_today){var n="bad"}else{var n="noc"}}a("#fs_overview_stats tbody tr").first().children("td").eq(1).prepend('<small class="fs_'+n+'">'+q.results.visits_yth_percent+"%</small>");if(q.results.hits_yth<q.results.hits_today){var n="good"}else{if(q.results.hits_yth>q.results.hits_today){var n="bad"}else{var n="noc"}}a("#fs_overview_stats tbody tr").first().children("td").eq(4).prepend('<small class="fs_'+n+'">'+q.results.hits_yth_percent+"%</small>");a("#fs_overview_stats thead tr").first().children("th").first().html("<span>"+q.results.user_online+"</span> Online")
})};showFSGraphs=function(){showFSDayPerfGraph();var p=new Date();p.setTime(Date.parse(new Date())+l);p.setMonth(p.getMonth()-1);var n=p.getDate();var q=p.getMonth()+1;var u=p.getFullYear();var p=new Date();p.setTime(Date.parse(new Date())+l);var o=p.getDate();var t=p.getMonth()+1;var s=p.getFullYear();a.getJSON("https://www.4stats.de/api/numbers?pid="+g+"&apikey="+j+"&from="+u+"-"+q+"-"+n+"&to="+s+"-"+t+"-"+o+"&jsoncallback=?",function(y){if(f(y.results)){return}chart_data=new Array(["Hour","Page Impressions","Visits"]);for(i=0;i<y.results.items.length;i++){stat=y.results.items[i];chart_data.push([stat.name,parseInt(stat.h),parseInt(stat.v)])}var z=google.visualization.arrayToDataTable(chart_data);var v={title:"Last 31 days Performance",hAxis:{title:"Hour",titleTextStyle:{color:"red"},textStyle:{color:"#3399CC",fontSize:10}},legend:"none",pointSize:4,lineWidth:3,gridlineColor:"#ececec",colors:["#eeeeee","#4caeff"],reverseCategories:true,backgroundColor:"transparent",vAxis:{baselineColor:"transparent",textPosition:"in",textStyle:{color:"#8F8F8F",fontSize:10}},chartArea:{width:"100%",height:"100%"}};
var w=new google.visualization.AreaChart(document.getElementById("chart_visitor_div_last31"));w.draw(z,v)});var p=new Date();p.setTime(Date.parse(new Date())+l);var r=p.getFullYear();a.getJSON("https://www.4stats.de/api/numbers?pid="+g+"&apikey="+j+"&year="+r+"&jsoncallback=?",function(y){if(f(y.results)){return}chart_data=new Array(["Hour","Page Impressions","Visits"]);for(i=0;i<y.results.items.length;i++){stat=y.results.items[i];chart_data.push([stat.name,parseInt(stat.h),parseInt(stat.v)])}var z=google.visualization.arrayToDataTable(chart_data);var v={title:"Year Performance",hAxis:{title:"Hour",titleTextStyle:{color:"red"},textStyle:{color:"#3399CC",fontSize:10}},legend:"none",pointSize:4,lineWidth:3,gridlineColor:"#ececec",colors:["#eeeeee","#4caeff"],reverseCategories:true,backgroundColor:"transparent",vAxis:{baselineColor:"transparent",textPosition:"in",textStyle:{color:"#8F8F8F",fontSize:10}},chartArea:{width:"100%",height:"100%"}};var w=new google.visualization.AreaChart(document.getElementById("chart_visitor_div_year"));
w.draw(z,v)})};showFSBoxStats=function(n,p,o){a.getJSON("https://www.4stats.de/api/"+n+"?pid="+g+"&apikey="+j+"&jsoncallback=?",function(q){if(f(q.results)){return}html='<div><table class="widefat"><thead><tr><th>'+o+"</th><th>"+p+"</th></tr></thead><tbody>";for(i=0;i<q.results.items.length;i++){stat=q.results.items[i];html+='<tr><td class="row-title">'+stat.count+"</td><td>"+stat.name+"</td></tr>";if(i>=9){break}}html+="</tbody></table></div>";a("#fs-box-row").append(html).fadeIn(300)})};showFSVisitorLog=function(){a.getJSON("https://www.4stats.de/api/visitor_log?pid="+g+"&apikey="+j+"&jsoncallback=?",function(p){if(f(p.results)){return}for(i=0;i<p.results.items.length;i++){stat=p.results.items[i];var n="<tr>";n+="<td>"+stat.time+"<br>"+stat.hits+" Page"+((stat.hits>1)?"s":"")+"</td>";n+="<td>"+stat.ip+"("+stat.host+")<br>";n+='<span class="'+getOsIconClass(stat.os)+'"></span> '+stat.os+' <span class="'+getBrowserIconClass(stat.browser)+'"></span> '+stat.browser+"<br>";n+="Screen: "+stat.screen+" - GEO: "+stat.geo+"</td>";
n+="<td>";if(stat.referrer!=""){var o=parseUri(stat.referrer);n+='<a href="http://'+stat.referrer+'" target="_blank">'+o.hostname+"</a>"}n+="<br>"+stat.entry+"<br>";if(stat.kw!=""){n+="Keyword: "+stat.kw+"</td>"}n+="</tr>";a("#fs-visitor-log tbody").append(n).fadeIn(300);if(i>=25){break}}})};return{statsPage:function(){showFSGraphs();showFSDashboard();showFSBoxStats("sites","Site","Views");window.setTimeout("showFSBoxStats('keywords', 'Keywords', 'Visits')",500);window.setTimeout("showFSBoxStats('referrer', 'Referrer', 'Visits')",1000);window.setTimeout("showFSBoxStats('browser', 'Browser', 'Visits')",1500);window.setTimeout("showFSBoxStats('os', 'OS', 'Visits')",2000);window.setTimeout("showFSBoxStats('screen', 'Screen', 'Visits')",2500);showFSVisitorLog()},dashBoard:function(){showFSWPDashboard()},}};window.fourStats=c})();